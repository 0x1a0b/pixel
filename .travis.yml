language: go
sudo: false
addons:
    apt:
        packages:
            - xorg-dev
            - libx11-dev
            - libxrandr-dev
            - libxinerama-dev
            - libxcursor-dev
            - libxi-dev
            - libopenal-dev
            - libasound2-dev
            - xvfb
go:
    - tip
    - 1.8.x
    - 1.7.4

install:
    - export DISPLAY=':99.0'
    - Xvfb :99 -screen 0 1920x1080x24 > /dev/null 2&>1 &
    - go get -t ./...

script:
    - go test -i -race ./...
    - go test -v -race ./...
